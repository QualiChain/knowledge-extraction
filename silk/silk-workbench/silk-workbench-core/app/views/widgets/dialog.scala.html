
@(title: String,
    width: Int = 700,
    submitLabel: String = "OK",
    secondaryLabel: String = "Secondary Button",
    createDialog: Boolean = true)(content: Html)

<div class="mdl-dialog__modalbackground"></div>
<div class="mdl-card mdl-card--stretch mdl-shadow--16dp mdl-dialog mdl-dialog--modal mdl-dialog--large is-activated">
  <div class="mdl-card__title mdl-card--border mdl-dialog__title">
    <h1 class="mdl-card__title-text">@title</h1>
    <div id="dialog-progress-spinner" class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div>
  </div>
  <div class="dialog__error-msg">
    <div class="mdl-alert mdl-alert--danger mdl-alert--border mdl-alert--spacing">
      <div class="mdl-alert__content">
        Error message.
      </div>
    </div>
  </div>
  <form id="dialog-form" action="javascript:submit();" enctype="multipart/form-data">
    <div class="mdl-card__content mdl-dialog__content">
    @content
    </div>
    <div class="mdl-card__actions mdl-card--border mdl-dialog__actions">
      <button id="dialog-submit-button" type="submit" class="mdl-button mdl-js-button mdl-button--accent">@submitLabel</button>
      <button id="dialog-secondary-button" type="button" class="mdl-button mdl-js-button mdl-button--accent" style="display: none;">@secondaryLabel</button>
      @if(createDialog) {
        <button id="dialog-cancel-button" type="button" class="mdl-button mdl-js-button mdl-button--accent close">Cancel</button>
      } else {
        <button id="dialog-cancel-button" type="button" class="mdl-button mdl-js-button mdl-button--accent close" autofocus>Cancel</button>
      }
    </div>
  </form>
  <script type="text/javascript">
    if (primary_dialog) {
      var closeButton = primary_dialog.querySelector('.close');
      if(closeButton) {
        closeButton.addEventListener('click', function () {
          primary_dialog.close();
        });
      }
      var secondaryButton = primary_dialog.querySelector('#dialog-secondary-button');
      if(secondaryButton) {
        secondaryButton.addEventListener('click', function () {
          dialog_secondary();
        });
      }
    }
    if (secondary_dialog) {
      var closeButton = secondary_dialog.querySelector('.close');
      if(closeButton) {
        closeButton.addEventListener('click', function () {
          secondary_dialog.close();
        });
      }
      var secondaryButton = secondary_dialog.querySelector('#dialog-secondary-button');
      if(secondaryButton) {
        secondaryButton.addEventListener('click', function () {
          dialog_secondary();
        });
      }
    }
    $(".dialog__error-msg").on('click', function() { $(this).fadeToggle(); });
  </script>
</div>
